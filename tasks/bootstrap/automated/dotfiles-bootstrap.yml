######################################################################################################
##################                   New Put everything in the RC FIle Way           ################# 
#################                    This way Ill allway have the same settings      ################# 
#################                    No matter what distro                           ################# 
#################                                                                    ################# 
######################################################################################################

#########################################################################################
##################                   Linux                                ################# 
#########################################################################################
  - name: Copy Dotfiles to Home Folder 
    block:


    - name: Copy bashrc
      copy:
        src: files/home-base/dotfiles/custom-bashrc
        dest: /home/rocket/.bashrc
        owner: rocket
        group: rocket
    

    - name: Copy zshrc
      copy:
        src: files/home-base/dotfiles/custom-zshrc
        dest: /home/rocket/.zshrc
        owner: rocket
        group: rocket


    - name: Copy Source-Dotfiles 
      copy:
        src: files/home-base/dotfiles/{{ item }}
        dest: /home/rocket/Dotfiles
        owner: rocket
        group: rocket
      with_items:
        - source-aliases
        - source-exports
        - source-settings

    when: ansible_distribution in ["Debian", "Ubuntu", "Archlinux", "Fedora", "Pop!_OS"]

 #########################################################################################
 ##################                   MAC                                ################# 
##########################################################################################
  - name: Copy Dotfiles to Home Folder 
    block:

#FYI MAC newest bash is install with homebrew
#if ever I need to add homebrew bash to the chpass list its in `cat /etc/shells`  
# Last time I did not have to do that it all just worked
# but this is the line I would append > `/opt/homebrew/bin/bash`



#Copy RC Files over

    - name: Copy bashrc
      copy:
        src: files/home-base/dotfiles/custom-bashrc
        dest: /Users/rocket/.bashrc
        owner: rocket

    - name: Copy zshrc
      copy: 
        src: files/home-base/dotfiles/custom-zshrc
        dest: /Users/rocket/.zshrc
        owner: rocket

    - name: Copy Source-Dotfiles  
      copy:
        src: files/home-base/dotfiles/{{ item }}
        dest: /Users/rocket/Dotfiles
        owner: rocket
      with_items:
        - source-aliases
        - source-exports
        - source-settings


#Bash change path of directory from "home" to "user"
    - name: change path of directory from "home" to "user"
      lineinfile:
        dest: /Users/rocket/.bashrc
        regexp: '^source /home/rocket/Dotfiles/source-aliases'
        line: 'source /Users/rocket/Dotfiles/source-aliases'
        state: present

    - name: change path of directory from "home" to "user"
      lineinfile:
        dest: /Users/rocket/.bashrc
        regexp: '^source /home/rocket/Dotfiles/source-exports'
        line: 'source /Users/rocket/Dotfiles/source-exports'
        state: present

    - name: change path of directory from "home" to "user"
      lineinfile:
        dest: /Users/rocket/.bashrc
        regexp: '^source /home/rocket/Dotfiles/source-settings'
        line: 'source /Users/rocket/Dotfiles/source-settings'
        state: present
      

#ZSH change path of directory from "home" to "user"
    - name: change path of directory from "home" to "user"
      lineinfile:
        dest: /Users/rocket/.zshrc
        regexp: '^source /home/rocket/Dotfiles/source-aliases'
        line: 'source /Users/rocket/Dotfiles/source-aliases'
        state: present

    - name: change path of directory from "home" to "user"
      lineinfile:
        dest: /Users/rocket/.zshrc
        regexp: '^source /home/rocket/Dotfiles/source-exports'
        line: 'source /Users/rocket/Dotfiles/source-exports'
        state: present

    - name: change path of directory from "home" to "user"
      lineinfile:
        dest: /Users/rocket/.zshrc
        regexp: '^source /home/rocket/Dotfiles/source-settings'
        line: 'source /Users/rocket/Dotfiles/source-settings'
        state: present
      

    when: ansible_local['custom']['device']['dev'] in ["mac"] # custom fact










#########################################################################################
##################                   OLD APPENDING WAY           ################# 
#################                                               ################# 
#################                                               ################# 
#################                                               ################# 
#########################################################################################


#########################################################################################
##################                   Linux                                ################# 
#########################################################################################
#- name: Linux Dotfiles
#  block:
#  
#  - name: Copy Dotfiles to Home Folder 
#    copy:
#      src: files/home-base/dotfiles/{{ item }}
#      dest: /home/rocket/Dotfiles
#      owner: rocket
#      group: rocket
#    with_items:
#      - source-aliases
#      - source-exports
#      - source-settings
#   
#
#  - name: Create .zshrc file
#    file:
#      path: /home/rocket/.zshrc
#      state: touch
#      owner: rocket
#      group: rocket
#      mode: 0775
#    
#
#
#  - name: bashrc
#    lineinfile:
#      path: /home/rocket/.bashrc
#      line: "{{ item }}"
#    with_items:
#      - '################################################################'
#      - 'source /home/rocket/Dotfiles/source-aliases'
#      - 'source /home/rocket/Dotfiles/source-exports'
#      - 'source /home/rocket/Dotfiles/source-settings'
#   
#
#  - name: zshrc
#    lineinfile:
#      path: /home/rocket/.zshrc
#      line: "{{ item }}"
#    with_items:
#      - '################################################################'
#      - 'source /home/rocket/Dotfiles/source-aliases'
#      - 'source /home/rocket/Dotfiles/source-exports'
#      - 'source /home/rocket/Dotfiles/source-settings'
#
#      
#  when: ansible_distribution in ["Debian", "Ubuntu", "Archlinux", "Fedora", "Pop!_OS"]
#
##- name: fishrc DO NOT DO LIKE THIS FISH NEEDS ITS OWN DOT FILES TO MANY ERRORS LIKE THIS
##  lineinfile:
##    path: /home/rocket/.config/fish/config.fish
##    line: "{{ item }}"
##  with_items:
##    - '################################################################'
##    - 'source /home/rocket/Dotfiles/source-aliases'
##    - 'source /home/rocket/Dotfiles/source-exports'
##    - 'source /home/rocket/Dotfiles/source-settings'
#
#
#
#
# #########################################################################################
# ##################                   MAC                                ################# 
###########################################################################################
#
#- name: Mac Dotfiles
#  block:
#
#
#  - name: Copy Dotfiles to Home Folder 
#    copy:
#      src: files/home-base/dotfiles/{{ item }}
#      dest: /Users/rocket/Dotfiles
#      owner: rocket
#    with_items:
#      - source-aliases
#      - source-exports
#      - source-settings
#
## ZSH
#  - name: Create .zshrc file
#    file:
#      path: /Users/rocket/.zshrc
#      state: touch
#      owner: rocket
#      mode: 0775
#
#  - name: zshrc (Mac)
#    lineinfile:
#      path: /Users/rocket/.zshrc
#      line: "{{ item }}"
#    with_items:
#      - '################################################################'
#      - 'source /Users/rocket/Dotfiles/source-aliases'
#      - 'source /Users/rocket/Dotfiles/source-exports'
#      - 'source /Users/rocket/Dotfiles/source-settings'
#
## BASH (make sure bash is installed through homebrew)
#  - name: Create .bashrc file
#    file:
#      path: /Users/rocket/.bashrc
#      state: touch
#      owner: rocket
#      mode: 0775
#
#  - name: bashrc (Mac)
#    lineinfile:
#      path: /Users/rocket/.bashrc
#      line: "{{ item }}"
#    with_items:
#      - '################################################################'
#      - 'source /Users/rocket/Dotfiles/source-aliases'
#      - 'source /Users/rocket/Dotfiles/source-exports'
#      - 'source /Users/rocket/Dotfiles/source-settings'
#  when: ansible_local['custom']['device']['dev'] in ["mac"] # custom fact